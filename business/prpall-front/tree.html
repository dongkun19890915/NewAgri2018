<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>机构树优化</title>
    <!--<link rel="stylesheet" href="./common/js/ztree/css/demo.css" type="text/css"/>-->
</head>
<body>
<!--<ul id="treeDemo" class="ztree" style="width:239px;float:left;">-->
<!--</ul>-->
<!--<ul id="treeDemo2" class="ztree">-->
<!--</ul>-->

<!--<script src="./common/js/jquery/jquery.min.js" type="text/javascript"></script>-->
<!--<script src="./common/js/ztree/js/jquery.ztree.all.min.js" type="text/javascript"></script>-->
<script type="text/javascript">
//    $(function(){
//
////        var para={"userCode":"0537","loginComCode":"3400000000","gradeCodes":"127"};
//        var para={"userCode":"0507","loginComCode":"3400000000","gradeCodes":"127"};
//        $.ajax({
//            url:"/prpDcompany/queryCompanyTree",
//            type:"post",
//            data:JSON.stringify(para),
//            contentType: "application/json;charset=utf-8",
//            success:function(data){
//                test2(data);
//            }
//        });
//
////        test2(data);
////        test1();
//    });
    function test2(nodes){
        //nodes=nodes["content"];
        var zTreeObj;
        var setting = {
            check:{
                enable: true,
                chkStyle : "checkbox",    //复选框
                autoCheckTrigger: true,
                chkDisabledInherit: false,
                chkboxType: { "Y": "s", "N": "ps" }
            },
            data:{
                key:{
                    checked:"ck",//是否选中
                    name:"n",//名称
                    children:"ch"
                },
                simpleData:{
                    enable: true,
                    idKey: "id",//code
                    pIdKey: "pid"//pcode
                }
            }
        };
        zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, nodes);
//        zTreeObj.expandAll(true);

        //var nodes=zTreeObj.getCheckedNodes(true);
        //console.log(nodes[0]);

        $("#getSelectedBtn").click(function(){
            var nodes=zTreeObj.getCheckedNodes(true);
            $rootScope.treecheck=nodes;
           console.log(nodes);
        });
    }

    function test1(){
        var nodes = [
            {name: "父节点1" ,"chkDisabled":true, children: [
                {name: "子节点1"},
                {name: "子节点2","chkDisabled":true}
            ]}
        ];
        var zTreeObj;
        var setting = {
            check:{
                enable: true,
                chkStyle : "checkbox",    //复选框
                autoCheckTrigger: true,
                chkDisabledInherit: false,
                chkboxType: { "Y": "s", "N": "ps" }
            }
        };
        zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, nodes);
        zTreeObj.expandAll(true);

    }
</script>
</body>
</html>